(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function a(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,"string");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:String(n)}function o(){window.pandascripttag=window.pandascripttag||[];for(var e=0;e<window.pandascripttag.length;e++)window.pandascripttag[e]();window.pandascripttag.length=0}window.PANDA_ORIGIN="*",window.getData=function(e){var t=JSON.parse(JSON.stringify({type:"allData",date:(new Date).getTime()}));e.postMessage(t,window.PANDA_ORIGIN)},window.PandaPlayer=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"paused",!1),a(this,"audio",!0),a(this,"muted",!1),a(this,"pip",!1),a(this,"volume",1),a(this,"captions",{}),a(this,"currentTime",0),a(this,"iframe",null),a(this,"duration",0),a(this,"fullscreen",!1),a(this,"ready",!1),a(this,"video_id",""),a(this,"element_id",""),a(this,"speed",{options:[],selected:1}),a(this,"_callbackQueue",[]),a(this,"colors",{primaryColor:"",captionsColor:"",captionsBackgroundColor:"",controlsColor:"",menuColor:""}),a(this,"callbacks",[]),a(this,"library_id",""),a(this,"captureMessage",(function(e){var t=e.data;if(t.video===i.video_id){if("panda_error"===t.message&&i.onError&&i.onError(t),"panda_allData"===t.message){if(!t&&!t.playerData)return;i.paused=t.playerData.paused,i.audio=t.playerData.hasAudio,i.muted=t.playerData.muted,i.pip=t.playerData.pip,i.volume=t.playerData.volume,i.captions=t.playerData.captions,i.currentTime=t.playerData.currentTime,i.duration=t.playerData.duration,i.fullscreen=t.playerData.fullscreen,i.colors=t.playerData.colors,i.speed=t.playerData.speed,i.ready||0===i.duration||(i.ready=!0,i.onReady&&i.onReady(),i._callbackQueue.forEach((function(e){return e()})),i._callbackQueue=[])}i.callbacks.forEach((function(e){return e(t)}))}})),this._onCreate(t,n)}var t,r;return t=e,(r=[{key:"_onCreate",value:function(e,t){var n=this,i=document.getElementById(e);if(i&&("IFRAME"!==i.tagName||i.src)){if(this.element_id=e,"DIV"===i.tagName){var a="";if(!t)return void console.error("PandaPlayer: options is required");var r=t.playerConfigs,o=t.video_id,s=t.library_id,c=t.defaultStyle;if(r)for(var u=0,l=Object.keys(r);u<l.length;u++){var d=l[u];a+="&".concat(d,"=").concat(r[d])}if(!o)return void console.error("PandaPlayer: video_id is required");if(!s)return void console.error("PandaPlayer: library_id is required");this.video_id=o,this.library_id=s,c?(i.style.cssText="position:relative;padding-top:56.25%;",i.innerHTML='\n        <iframe style="border:none;position:absolute;top:0;height:100%;width:100%" src="https://player-'.concat(s,".tv.pandavideo.com.br/embed/?v=").concat(o).concat(a,'" allow="accelerometer;gyroscope;autoplay;encrypted-media;picture-in-picture" allowfullscreen=true></iframe>\n        ')):i.innerHTML='\n        <iframe src="https://player-'.concat(s,".tv.pandavideo.com.br/embed/?v=").concat(o).concat(a,'" allow="accelerometer;gyroscope;autoplay;encrypted-media;picture-in-picture" allowfullscreen=true></iframe>\n        '),i.querySelector("iframe").onload=function(){n.iframe=i.querySelector("iframe").contentWindow,n._onIframeLoaded()}}else{this.iframe=document.getElementById(e).contentWindow;var p=new URL(document.getElementById(e).src);this.video_id=p.searchParams.get("v");var f=p.searchParams.get("l");this.library_id=f||p.hostname.split(".tv")[0].split("player-")[1],this._onIframeLoaded()}t&&t.onError&&(this.onError=t.onError),t&&t.onReady?this.onReady=t.onReady:this.onReady=window.onPandaIframeAPIReady}else{for(var y=e.replace("panda-",""),m=document.getElementsByTagName("iframe"),h=0;h<m.length;h++)m[h].src&&new RegExp("".concat(y)).test(m[h].src)&&(m[h].id=e,this._onCreate(e,t));setTimeout((function(){return n._onCreate(e,t)}),500)}}},{key:"_onIframeLoaded",value:function(){var e=this;setInterval((function(){window.getData(e.iframe)}),500),window.addEventListener("message",this.captureMessage,!1)}},{key:"loadWindowScreen",value:function(e){var t=e.panda_id_player,n=!1,i=0,a=0,r=0,o=function(){var e=document.getElementById(t);i||(i=e.height?e.height:e.style.height),a||(a=e.width?e.width:e.style.width),r||(r=e.style.zIndex),e.style.height=window.innerHeight+"px",e.style.width=window.innerWidth+"px",e.style.position="fixed",e.style.overflow="hidden",e.style.left=0,e.style.zIndex=999999,document.body.style.overflow="hidden",n=!0},s=function(){var e=document.getElementById(t);e.style.height=i?i.match(/%/)?i:i+"px":"100%",e.style.width=a?a.match(/%/)?a:a+"px":"100%",e.style.position="absolute",e.style.zIndex=r,document.body.style.overflow="inherit",n=!1};this.onEvent((function(e){"panda_open_window_fullscreen"==e.message?o():"panda_close_window_fullscreen"==e.message&&s()})),document.onkeydown=function(e){27==(e=e||window.event).keyCode&&n&&s()},window.addEventListener("resize",(function(){n&&o()}))}},{key:"loadButtonInTime",value:function(e){var t=this,i=e.time,a=e.divId,r=e.script,o=e.fetchApi,s=e.duration;if(o){var c="https://config.tv.pandavideo.com.br/".concat(this.library_id,"/").concat(this.video_id,".json?date=").concat((new Date).getTime());fetch(c).then((function(e){return e.json()})).then((function(e){e.outsideCta&&e.outsideCta.forEach((function(e){t.loadButtonInTime(n(n({},e),{},{time:parseInt(""+e.time,10)}))}))}))}else if(a){if(!document.getElementById(a))return;this.onEvent((function(e){if("panda_timeupdate"===e.message){var n=e.currentTime;if(e.isMutedIndicator)return;var o=document.getElementById(a),c=document.getElementById("".concat(a,"_iframe"));try{s=parseInt(s+"",10)}catch(e){s=0}if(isNaN(i)&&(i=0),0===s&&(s=t.duration+1),n>=i&&n<i+s&&o&&!c){var u=document.createElement("iframe");u.style="border:0;width:100%;height:100%",u.id="".concat(a,"_iframe"),u.onload=function(){var e=document.getElementById("".concat(a,"_iframe")),t=/<script>(.|\n)*?<\/script>/gm,n=r.match(t),i=r.replace(t,"");if(n&&n.length){var o=n[0].replace("<script>","").replace("<\/script>",""),s=document.createElement("script");s.type="text/javascript",s.innerHTML=o,e.contentWindow.document.body.innerHTML="".concat(i),e.contentWindow.document.body.appendChild(s)}else e.contentWindow.document.body.innerHTML="".concat(i);e.contentWindow.document.body.style="padding:0;margin:0"},o.appendChild(u)}else if(n<i||n>i+s){var l=document.getElementById("".concat(a,"_iframe"));l&&l.remove()}}}))}}},{key:"_setEvent",value:function(e){this.ready?e():this._callbackQueue.push(e)}},{key:"destroy",value:function(){var e=document.getElementById(this.element_id);"DIV"===e.tagName?document.getElementById(this.element_id).innerHTML="":e.remove(),this.callbacks=[],window.removeEventListener("message",this.captureMessage)}},{key:"getColors",value:function(){return this.colors}},{key:"getSpeed",value:function(){return this.speed}},{key:"setSpeed",value:function(e){var t=this;this._setEvent((function(){t.iframe.postMessage({type:"speed",parameter:e},window.PANDA_ORIGIN),t.speed.selected=e}))}},{key:"setColor",value:function(e,t){var n=this;this._setEvent((function(){n.iframe.postMessage({type:"colors",parameter:{colors:a({},e,t)}},window.PANDA_ORIGIN),n.colors[e]=t}))}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.duration}},{key:"isFullscreen",value:function(){return this.fullscreen}},{key:"getVolume",value:function(){return this.volume}},{key:"isPaused",value:function(){return this.paused}},{key:"isMuted",value:function(){return this.muted}},{key:"isPIP",value:function(){return this.pip}},{key:"hasAudio",value:function(){return this.hasAudio}},{key:"play",value:function(){var e=this;this._setEvent((function(){e.iframe.postMessage({type:"play"},window.PANDA_ORIGIN),e.isPaused=!1}))}},{key:"pause",value:function(){var e=this;this._setEvent((function(){e.iframe.postMessage({type:"pause"},window.PANDA_ORIGIN),e.isPaused=!0}))}},{key:"togglePlay",value:function(){var e=this;this._setEvent((function(){e.iframe.postMessage({type:"togglePlay"},window.PANDA_ORIGIN),e.isPaused=!e.isPaused}))}},{key:"toggleFullscreen",value:function(){var e=this;this._setEvent((function(){e.iframe.postMessage({type:"fullscreen.toggle"},window.PANDA_ORIGIN),e.fullscreen=!e.fullscreen}))}},{key:"exitFullscreen",value:function(){var e=this;this._setEvent((function(){e.iframe.postMessage({type:"fullscreen.exit"},window.PANDA_ORIGIN),e.fullscreen=!1}))}},{key:"setCurrentTime",value:function(e){var t=this;this._setEvent((function(){t.iframe.postMessage({type:"currentTime",parameter:e},window.PANDA_ORIGIN),t.currentTime=e}))}},{key:"setVolume",value:function(e){var t=this;this._setEvent((function(){t.iframe.postMessage({type:"volume",parameter:e},window.PANDA_ORIGIN),t.volume=e}))}},{key:"getCaptions",value:function(){return this.captions}},{key:"onEvent",value:function(e){this.callbacks.push(e)}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),window.pandascripttag=window.pandascripttag||[],0!==window.pandascripttag.length&&o(),window.pandascripttag.push=function(){Array.prototype.push.apply(this,arguments),o()},function e(){if(window.onPandaPlayerApiLoad)return window.pandascripttag.push(window.onPandaPlayerApiLoad),void(window.onPandaPlayerApiLoad=null);setTimeout(e,100)}()})();